<!DOCTYPE HTML>
<html>
<head>
<title>收货地址</title>
<meta charset="utf-8">
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<link rel="stylesheet" type="text/css" href="../css/reset.css"/>
<link rel="stylesheet" type="text/css" href="../css/css_1.css"/>
<script src="../js/appcan.js"></script>
<script src="../js/appcan.control.js"></script>
<script src="../js/application.js"></script>
<script src="../js/application.init.js"></script>

</head>

<body>
    <header id="header">
        <i class="icon-goback" onclick="baoapp.helper.goback();"></i>
        <div class="title">收货地址</div>
        <i class="icon-menu" id="ico_3"></i>
    </header>
    <div id="content"></div>
    <footer>
       <script src='../js/application.footer.js'></script>
    </footer>
</body>


<script>
     $("#ico_3").click(function(){
        baoapp.helper.linkTo('add_addr','add_addr.html')
    });
    
</script>

<script>
appcan.ready(function(){ 
 var height = baoapp.helper.adapt();
   with(baoapp.helper)
   {
       if(!islogin()){
            toast('登录状态失效,请重新登录',1000,function(){
                linkTo('login','../login.html');
            },1)
            return;
        }
       //有缓存数据读缓存,没有网络读取
       //if(!cacheExpireRead(KEY.MEMBER_ADDR)){
          frameOpen('content','../loading.html',height,function(){
                var url = createUrl('mcenter','addr_index');
                 ayscLoad(url,null,'GET','json',function(data){
                    if(data.status == 200){
                         //抓取数据写入缓存
                        cacheExpireWrite(KEY.MEMBER_ADDR,JSON.stringify(data['addr']));
                        frameOpen('content','addr_content.html',height);
                    }else if(data.status == CONST.BAO_LOGIN_NO_REG){
                        clearlogin();
                        toast('登录状态失效,请重新登录',1000,function(){
                            linkTo('login','../login.html');
                        },1);
                        return;
                    }else{
                        frameOpen('content','../loading_fail.html',height);
                    }
                });          
          });
       //}else{
            //frameOpen('content','addr_content.html',height);
       //}   

   };
});

</script>

</html>