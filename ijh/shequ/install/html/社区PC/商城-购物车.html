<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link href="statics/css/pub.css" rel="stylesheet">
	<link href="statics/css/animate.css" rel="stylesheet">
	<link href="statics/css/style.css" rel="stylesheet">
	<script src="statics/js/jquery.js"></script>
	</head>
<body class="shangcheng shangcheng_bg">
	<div class="topOne">
    	<div class="pagewd">
        	<div class="phone fl maincl"><i class="ico"></i>手机版</div>
            <a href="#" class="user fl maincl">元升franckever<i class="arrow_ico"></i></a>
            <a href="#" class="message fl black6"><i class="ico"></i>消息<span class="fontcl1">1</span><i class="arrow_ico"></i></a>
            <div class="fr link_box"><a href="#">我的订单</a> <span>|</span> <a href="#">我的收藏</a> <span>|</span> <a href="#">申请入驻</a></div>
            <div class="clear"></div>
        </div>
    </div>
    <div class="headerTop_one green">
        <div class="pagewd">
            <div class="logo fl">
                <img src="statics/images/logo_white.png">
            </div>
            <div class="tit fl">购物车</div>
            <div class="clear"></div>
        </div>
    </div>
    <!---->
    <div class="shangcheng-shoppingcar-content shangcheng-wrap">
    	<div class="nav">
	    	<ul>
	    		<li class="nav-all"><input type="checkbox" class="allchoose">全选</li>
	    		<li class="nav-shop">商品</li>
	    		<li class="nav-num">数量</li>
	    		<li class="nav-jifen">积分</li>
	    		<li class="nav-price">金额</li>
	    		<li class="nav-del">操作</li>
	    	</ul>
    	</div>
    	<div class="box">
    		<input type="checkbox">
    		<a href=""><img src="statics/pic/small-sh.png"></a>
    		<div class="txt">
    			<h5>商品名称</h5>
    			<p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
    			<p class="kucun black9">剩余数量：12</p>
    		</div>
    		<div class="num">
    			<div class="jian fl">-</div>
    			<input type="text" value="2">
				<div class="jia fr">+</div>
    		</div>
    		<span class="jifen">1200</span>
    		<span class="price">20</span>
    		<span class="del black3">删除</span>
    	</div>
        <div class="box">
            <input type="checkbox">
            <a href=""><img src="statics/pic/small-sh.png"></a>
            <div class="txt">
                <h5>商品名称</h5>
                <p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
                <p class="kucun black9">剩余数量：12</p>
            </div>
            <div class="num">
                <div class="jian fl">-</div>
                <input type="text" value="2">
                <div class="jia fr">+</div>
            </div>
            <span class="jifen">1200</span>
            <span class="price">20</span>
            <span class="del black3">删除</span>
        </div>
        <div class="box">
            <input type="checkbox">
            <a href=""><img src="statics/pic/small-sh.png"></a>
            <div class="txt">
                <h5>商品名称</h5>
                <p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
                <p class="kucun black9">剩余数量：12</p>
            </div>
            <div class="num">
                <div class="jian fl">-</div>
                <input type="text" value="2">
                <div class="jia fr">+</div>
            </div>
            <span class="jifen">1200</span>
            <span class="price">20</span>
            <span class="del black3">删除</span>
        </div>
        <div class="box">
            <input type="checkbox">
            <a href=""><img src="statics/pic/small-sh.png"></a>
            <div class="txt">
                <h5>商品名称</h5>
                <p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
                <p class="kucun black9">剩余数量：12</p>
            </div>
            <div class="num">
                <div class="jian fl">-</div>
                <input type="text" value="2">
                <div class="jia fr">+</div>
            </div>
            <span class="jifen">1200</span>
            <span class="price">20</span>
            <span class="del black3">删除</span>
        </div>
        <div class="box">
            <input type="checkbox">
            <a href=""><img src="statics/pic/small-sh.png"></a>
            <div class="txt">
                <h5>商品名称</h5>
                <p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
                <p class="kucun black9">剩余数量：12</p>
            </div>
            <div class="num">
                <div class="jian fl">-</div>
                <input type="text" value="2">
                <div class="jia fr">+</div>
            </div>
            <span class="jifen">1200</span>
            <span class="price">20</span>
            <span class="del black3">删除</span>
        </div>
        <div class="box">
            <input type="checkbox">
            <a href=""><img src="statics/pic/small-sh.png"></a>
            <div class="txt">
                <h5>商品名称</h5>
                <p><span class="danjia">￥<span class="sp-danjia">10</span></span><span class="shangpin-jifen">600</span>积分</p>
                <p class="kucun black9">剩余数量：12</p>
            </div>
            <div class="num">
                <div class="jian fl">-</div>
                <input type="text" value="2">
                <div class="jia fr">+</div>
            </div>
            <span class="jifen">1200</span>
            <span class="price">20</span>
            <span class="del black3">删除</span>
        </div>
    </div>

    <!-- 固定层 -->
    <div class="shangcheng-shoppingcar-bot">
    	<p class="bot-all"><input type="checkbox" class="allchoose">全选</p>
		<p class="black3 del">删除</p>
		<p class="yixuan">已选<span class="number">1</span>件</p>
		<p class="zong-price">合计：<span>￥<span>20</span></span></p>
		<p class="jifen">1200<span>积分</span></p>
		<a class="btn">提交订单</a>
    </div>

<!-- js -->
<script type="text/javascript">
    var $no=$('.shangcheng-shoppingcar-bot').find('.number')
    var $inp=$('.shangcheng-shoppingcar-content .box input[type=checkbox]');
    var $all=$('.shangcheng .allchoose');
    var Length=$('.shangcheng-shoppingcar-content .box input[type=checkbox]:checked').length;
    $inp.click(function(){
            if($(this).prop('checked')==false){
                $all.removeAttr('checked');
            }
        var Length=$('.shangcheng-shoppingcar-content .box input[type=checkbox]:checked').length;
        $no.text(Length)    
    })

    $all.click(function(){
        if($(this).prop('checked')==true){
            $inp.prop('checked',true);
            $all.prop('checked',true);
        }
        else{
            $inp.prop('checked',false);
            $all.prop('checked',false);
        }
        var Length=$('.shangcheng-shoppingcar-content .box input[type=checkbox]:checked').length;
        $no.text(Length)    
    });

    // 删除
    var $del_p=$('.shangcheng-shoppingcar-content');
    var $del=$del_p.find('.del')
    $del.click(function(){
        $(this).parent().fadeOut('fast', function() {
            $(this).remove();
        });
    });

    //数量
    var $jian=$('.shangcheng-shoppingcar-content .box .num .jian')
    var $jia=$('.shangcheng-shoppingcar-content .box .num .jia')
    var $l_num=$('.shangcheng-shoppingcar-content .box .num input')
    $jian.click(function(){
        var $num=$(this).parent('.num').find('input')
        var $danjia=parseInt($(this).parents('.box').find('.sp-danjia').text());
        var $jifensig=parseInt($(this).parents('.box').find('.shangpin-jifen').text());
        var $price=$(this).parents('.box').find('.price');
        var $z_jifen=$(this).parents('.box').find('.jifen');
        $num.val($num.val()-1)
        $price.text($danjia*$num.val())
        $z_jifen.text($jifensig*$num.val())
        if($num.val()<0){
            $num.val(0);
            $price.text(0)
            $z_jifen.text(0)
        }
    });
    $jia.click(function(){
        var $num=$(this).parent('.num').find('input');
        var $danjia=parseInt($(this).parents('.box').find('.sp-danjia').text());
        var $jifensig=parseInt($(this).parents('.box').find('.shangpin-jifen').text());
        var $price=$(this).parents('.box').find('.price');
        var $z_jifen=$(this).parents('.box').find('.jifen');
        $num.val(parseInt($num.val())+1)
        $price.text($danjia*$num.val())
        $z_jifen.text($jifensig*$num.val())
    });
    $l_num.bind('input propertychange',function(){
        var $num=$(this).parent('.num').find('input');
        var $danjia=parseInt($(this).parents('.box').find('.sp-danjia').text());
        var $jifensig=parseInt($(this).parents('.box').find('.shangpin-jifen').text());
        var $price=$(this).parents('.box').find('.price');
        var $z_jifen=$(this).parents('.box').find('.jifen');
        var num=$num.val()
        $price.text($danjia*$num.val())
        $z_jifen.text($jifensig*$num.val())
        if($num.val()<0){
            $num.val(0);
            $price.text(0)
            $z_jifen.text(0)
        }
    });
</script>

</body>
</html>